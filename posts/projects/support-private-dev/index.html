<!doctype html><html lang=ko>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=robots content="noodp">
<title>ì‚¬ë‚´ Private project(ìš´ì˜ì§€ì›) - KURURU Blog</title><meta name=description content="ì‚¬ë‚´ Private projectì§„í–‰ì— ë”°ë¥¸ Devops ì—…ë¬´ì§€ì›"><meta property="og:title" content="ì‚¬ë‚´ Private project(ìš´ì˜ì§€ì›)">
<meta property="og:description" content="ì‚¬ë‚´ Private projectì§„í–‰ì— ë”°ë¥¸ Devops ì—…ë¬´ì§€ì›">
<meta property="og:type" content="article">
<meta property="og:url" content="https://rick00kim.github.io/kururu-blog/posts/projects/support-private-dev/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-11-15T10:00:23+09:00">
<meta property="article:modified_time" content="2021-12-05T17:45:33+09:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="ì‚¬ë‚´ Private project(ìš´ì˜ì§€ì›)">
<meta name=twitter:description content="ì‚¬ë‚´ Private projectì§„í–‰ì— ë”°ë¥¸ Devops ì—…ë¬´ì§€ì›">
<meta name=application-name content="FeelIt">
<meta name=apple-mobile-web-app-title content="FeelIt"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://rick00kim.github.io/kururu-blog/posts/projects/support-private-dev/><link rel=prev href=https://rick00kim.github.io/kururu-blog/posts/devops/ssh-authentication/><link rel=stylesheet href=/kururu-blog/css/page.min.css><link rel=stylesheet href=/kururu-blog/css/home.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"ì‚¬ë‚´ Private project(ìš´ì˜ì§€ì›)","inLanguage":"ko","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/rick00kim.github.io\/kururu-blog\/posts\/projects\/support-private-dev\/"},"genre":"posts","keywords":"Devops, projects","wordcount":1105,"url":"https:\/\/rick00kim.github.io\/kururu-blog\/posts\/projects\/support-private-dev\/","datePublished":"2021-11-15T10:00:23+09:00","dateModified":"2021-12-05T17:45:33+09:00","publisher":{"@type":"Organization","name":"Rick_Kim"},"author":{"@type":"Person","name":"Rick_Kim"},"description":"ì‚¬ë‚´ Private projectì§„í–‰ì— ë”°ë¥¸ Devops ì—…ë¬´ì§€ì›"}</script></head><body data-header-desktop data-header-mobile><script>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':'dark'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'dark'==='dark')&&document.body.setAttribute('theme','dark')</script>
<div id=mask></div><div class=wrapper><header class=desktop id=header-desktop>
<div class=header-wrapper>
<div class=header-title>
<a href=/kururu-blog/ title="KURURU Blog">KURURU Blog</a>
</div>
<div class=menu>
<div class=menu-inner><a class=menu-item href=/kururu-blog/posts/> Posts </a><a class=menu-item href=/kururu-blog/tags/> Tags </a><a class=menu-item href=/kururu-blog/categories/> Categories </a><a class=menu-item href=/kururu-blog/about/> About </a><span class="menu-item delimiter"></span><span class="menu-item language" title="Select Language">Korean<i class="fas fa-chevron-right fa-fw"></i>
<select class=language-select id=language-select-desktop onchange="location=this.value"><option value=/kururu-blog/posts/projects/support-private-dev/ selected>Korean</option></select>
</span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=# class="search-button search-toggle" id=search-toggle-desktop title=Search>
<i class="fas fa-search fa-fw"></i>
</a>
<a href=# class="search-button search-clear" id=search-clear-desktop title=Clear>
<i class="fas fa-times-circle fa-fw"></i>
</a>
<span class="search-button search-loading" id=search-loading-desktop>
<i class="fas fa-spinner fa-fw fa-spin"></i>
</span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i>
</a>
</div>
</div>
</div>
</header><header class=mobile id=header-mobile>
<div class=header-container>
<div class=header-wrapper>
<div class=header-title>
<a href=/kururu-blog/ title="KURURU Blog">KURURU Blog</a>
</div>
<div class=menu-toggle id=menu-toggle-mobile>
<span></span><span></span><span></span>
</div>
</div>
<div class=menu id=menu-mobile><div class=search-wrapper>
<div class="search mobile" id=search-mobile>
<input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=# class="search-button search-toggle" id=search-toggle-mobile title=Search>
<i class="fas fa-search fa-fw"></i>
</a>
<a href=# class="search-button search-clear" id=search-clear-mobile title=Clear>
<i class="fas fa-times-circle fa-fw"></i>
</a>
<span class="search-button search-loading" id=search-loading-mobile>
<i class="fas fa-spinner fa-fw fa-spin"></i>
</span>
</div>
<a href=# class=search-cancel id=search-cancel-mobile>
Cancel
</a>
</div><a class=menu-item href=/kururu-blog/posts/ title>Posts</a><a class=menu-item href=/kururu-blog/tags/ title>Tags</a><a class=menu-item href=/kururu-blog/categories/ title>Categories</a><a class=menu-item href=/kururu-blog/about/ title>About</a><div class=menu-item><a href=javascript:void(0); class=theme-switch title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i>
</a>
</div><span class="menu-item language" title="Select Language">Korean<i class="fas fa-chevron-right fa-fw"></i>
<select class=language-select onchange="location=this.value"><option value=/kururu-blog/posts/projects/support-private-dev/ selected>Korean</option></select>
</span></div>
</div>
</header><div class="search-dropdown desktop">
<div id=search-dropdown-desktop></div>
</div>
<div class="search-dropdown mobile">
<div id=search-dropdown-mobile></div>
</div><main class=main>
<div class=container><div class=toc id=toc-auto>
<h2 class=toc-title>Contents</h2>
<div class="toc-content always-active" id=toc-content-auto></div>
</div><article class="page single" data-toc=enable><div class=featured-image><img class=lazyload src=/kururu-blog/svg/loading.min.svg data-src=support-private-dev.jpg data-srcset="/kururu-blog/posts/projects/support-private-dev/support-private-dev.jpg, support-private-dev.jpg 1.5x, /kururu-blog/posts/projects/support-private-dev/support-private-dev.jpg 2x" data-sizes=auto alt=/kururu-blog/posts/projects/support-private-dev/support-private-dev.jpg title="ì‚¬ë‚´ Private projectì§„í–‰ì— ë”°ë¥¸ Devops ì—…ë¬´ì§€ì›"></div><div class=single-card data-image=true><h2 class="single-title animated flipInX">ì‚¬ë‚´ Private project(ìš´ì˜ì§€ì›)</h2><div class=post-meta>
<div class=post-meta-line><span class=post-author><a href=/kururu-blog/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>Rick_Kim</a></span>&nbsp;<span class=post-category>published in <a href=/kururu-blog/categories/private_projects/><i class="far fa-folder fa-fw"></i>private_projects</a></span></div>
<div class=post-meta-line><span><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2021-11-15>2021-11-15</time></span>&nbsp;<span><i class="fas fa-pencil-alt fa-fw"></i>&nbsp;1105 words</span>&nbsp;
<span><i class="far fa-clock fa-fw"></i>&nbsp;3 minutes</span>&nbsp;</div>
</div>
<hr><div class="details toc" id=toc-static data-kept>
<div class="details-summary toc-title">
<span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span>
</div>
<div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents>
<ul>
<li>
<ul>
<li>
<ul>
<li></li>
</ul>
</li>
</ul>
</li>
<li><a href=#background>BACKGROUND</a>
<ul>
<li><a href=#ê°œë°œ-stacks>ê°œë°œ Stacks</a></li>
<li><a href=#projectë‚´-ì—­í• >projectë‚´ ì—­í• </a></li>
</ul>
</li>
<li><a href=#goal>GOAL</a></li>
<li><a href=#contents>CONTENTS</a>
<ul>
<li><a href=#ì´ˆê¸°ê°œë°œí™˜ê²½-êµ¬ì¶•>ì´ˆê¸°ê°œë°œí™˜ê²½ êµ¬ì¶•</a></li>
<li><a href=#github-actions-ìƒì„±>Github actions ìƒì„±</a></li>
<li><a href=#live-server-releaseìš©-pipelineìƒì„±>Live server releaseìš© pipelineìƒì„±</a></li>
</ul>
</li>
<li><a href=#conclusion>CONCLUSION</a></li>
</ul>
</nav></div>
</div><div class=content id=content><h5 id=project-ì§„í–‰-ì‹œê¸°-20211115---20211120>Project ì§„í–‰ ì‹œê¸°: 2021/11/15 - 2021/11/20</h5>
<h2 id=background>BACKGROUND</h2>
<ul>
<li>ì‚¬ë‚´ ì¼ë¶€ íŒ€ì›ë“¤ê°„ private projectê°€ ì§„í–‰</li>
<li>ProjectëŠ” ìš”êµ¬ì‚¬í•­, UI Design, ê¸°ëŠ¥ì„¤ê³„ê°€ ì§„í–‰ì¤‘ì¸ ìƒí™©</li>
<li>ì„¤ê³„ê°€ ì™„ë£Œëœ ì‹œì ì—ì„œ ë°”ë¡œ ê°œë°œì— ì°©ìˆ˜í• ìˆ˜ ìˆë„ë¡ í™˜ê²½êµ¬ì¶• ë° Module Release pipelineì‘ì„±ì— ëŒ€í•œ ì˜ë¢°ë¥¼ ë°›ìŒ</li>
</ul>
<h3 id=ê°œë°œ-stacks>ê°œë°œ Stacks</h3>
<ul>
<li>Server: Ubuntu 20.04.02 (ì‚¬ë‚´ ìš´ìš©ì¤‘)</li>
<li>Web server: NGINX</li>
<li>Language & Framework
<ol>
<li>Frontend
ReactJS</li>
<li>Backend
Node.js (express)</li>
<li>Database
MongoDB</li>
<li>Tools
<ul>
<li>Slack</li>
<li>Git</li>
<li>Docker</li>
<li>docker-compose</li>
<li>Jenkins</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id=projectë‚´-ì—­í• >projectë‚´ ì—­í• </h3>
<ul>
<li>ì´ˆê¸°ê°œë°œí™˜ê²½ êµ¬ì¶•</li>
<li>Live serverë¡œì˜ Releaseìš© pipeline ì‘ì„± ë° í…ŒìŠ¤íŠ¸</li>
</ul>
<h2 id=goal>GOAL</h2>
<p>ë³¸ projectë‚´ ì—­í• ì„ ì™„ë£Œ</p>
<h2 id=contents>CONTENTS</h2>
<h3 id=ì´ˆê¸°ê°œë°œí™˜ê²½-êµ¬ì¶•>ì´ˆê¸°ê°œë°œí™˜ê²½ êµ¬ì¶•</h3>
<ol>
<li>
<p>ê°œë°œìš© MongoDB Containerë¥¼ ìš´ì˜ì„œë²„ì— ì‹¤í–‰</p>
<ul>
<li>Dockerfileìƒì„± [ì•„ë˜ ì½”ë“œëŠ” Template]</li>
</ul>
<pre tabindex=0><code>FROM mongo

 # Environment variables for Initializing DB
 # Mongodb Global variables
 ENV MONGO_INITDB_ROOT_USERNAME 'dev_admin'
 ENV MONGO_INITDB_ROOT_PASSWORD 'dev2140'

 # Development environment variables
 ENV DEV_DATABASE 'dev_web'
 ENV DEV_USERNAME 'dev_manager'
 ENV DEV_PASSWORD 'devPasswd1@#'

 # Copy Initialize file
 COPY ./users_init.sh /docker-entrypoint-initdb.d/

 EXPOSE 27017
</code></pre><ul>
<li>Initialize Shell script ìƒì„±</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=cp>#!/bin/bash
</span><span class=cp></span> <span class=nb>set</span> -e

 <span class=nb>echo</span> <span class=s2>&#34;&gt;&gt;&gt;&gt;&gt;&gt;&gt; trying to create database and users&#34;</span>
 <span class=k>if</span> <span class=se>\
</span><span class=se></span> <span class=o>[</span> -n <span class=s2>&#34;</span><span class=si>${</span><span class=nv>MONGO_INITDB_ROOT_USERNAME</span><span class=k>:-</span><span class=si>}</span><span class=s2>&#34;</span> <span class=o>]</span> <span class=o>&amp;&amp;</span> <span class=se>\
</span><span class=se></span> <span class=o>[</span> -n <span class=s2>&#34;</span><span class=si>${</span><span class=nv>MONGO_INITDB_ROOT_PASSWORD</span><span class=k>:-</span><span class=si>}</span><span class=s2>&#34;</span> <span class=o>]</span> <span class=o>&amp;&amp;</span> <span class=se>\
</span><span class=se></span> <span class=o>[</span> -n <span class=s2>&#34;</span><span class=si>${</span><span class=nv>DEV_DATABASE</span><span class=k>:-</span><span class=si>}</span><span class=s2>&#34;</span> <span class=o>]</span> <span class=o>&amp;&amp;</span> <span class=se>\
</span><span class=se></span> <span class=o>[</span> -n <span class=s2>&#34;</span><span class=si>${</span><span class=nv>DEV_USERNAME</span><span class=k>:-</span><span class=si>}</span><span class=s2>&#34;</span> <span class=o>]</span> <span class=o>&amp;&amp;</span> <span class=se>\
</span><span class=se></span> <span class=o>[</span> -n <span class=s2>&#34;</span><span class=si>${</span><span class=nv>DEV_PASSWORD</span><span class=k>:-</span><span class=si>}</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
 mongo -u <span class=nv>$MONGO_INITDB_ROOT_USERNAME</span> -p <span class=nv>$MONGO_INITDB_ROOT_PASSWORD</span> <span class=s>&lt;&lt;EOF
</span><span class=s> db=db.getSiblingDB(&#39;$DEV_DATABASE&#39;);
</span><span class=s> use $DEV_DATABASE;
</span><span class=s> db.createUser({
</span><span class=s>   user: &#39;$DEV_USERNAME&#39;,
</span><span class=s>   pwd: &#39;$DEV_PASSWORD&#39;,
</span><span class=s>   roles: [{
</span><span class=s>     role: &#39;readWrite&#39;,
</span><span class=s>     db: &#39;$DEV_DATABASE&#39;
</span><span class=s>   }]
</span><span class=s> });
</span><span class=s> EOF</span>
 <span class=k>else</span>
     <span class=nb>echo</span> <span class=s2>&#34;Not exists environment variables...&#34;</span>
     <span class=nb>exit</span> <span class=m>403</span>
 <span class=k>fi</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>ì›ê²© ì„œë²„ì— ê°œë°œìš© DB server ì‹¤í–‰</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=c1># docker ì»¨í…Œì´ë„ˆì‹¤í–‰ì— í•„ìš”í•œ í™˜ê²½ë³€ìˆ˜ ì„¤ì •</span>
<span class=nb>export</span> <span class=nv>mongoImageName</span><span class=o>=</span>aacs_mongo_img
<span class=nb>export</span> <span class=nv>mongoContainerName</span><span class=o>=</span>aacs_mongo_dev

<span class=c1># docker build</span>
docker build -f DockerfileForMongo -t <span class=si>${</span><span class=nv>mongoImageName</span><span class=si>}</span> .

<span class=c1># docker run</span>
docker run --name <span class=si>${</span><span class=nv>mongoContainerName</span><span class=si>}</span> -p 27017:27017 --rm -d <span class=si>${</span><span class=nv>mongoImageName</span><span class=si>}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Git repositoryë‚´ Frontend & Backend ëª¨ë“ˆ ìƒì„±</p>
<ul>
<li>Git repository clone</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>git clone <span class=o>{</span>project repository URL<span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>Backend folder ìƒì„± & NodeJS init</li>
</ul>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=c1># í´ë” ìƒì„±</span>
mkdir backend

<span class=c1># NodeJS init</span>
<span class=nb>cd</span> backend <span class=o>&amp;&amp;</span> npm init
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>React module ìƒì„±</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>yarn create react-app frontend
</code></pre></td></tr></table>
</div>
</div></li>
</ol>
<p>âœ¨ Github ìš´ì˜ rules
<div class="details admonition info">
<div class="details-summary admonition-title">
<i class="icon fas fa-info-circle fa-fw"></i>Github flow<i class="details-icon fas fa-angle-right fa-fw"></i>
</div>
<div class=details-content>
<div class=admonition-content><img class=lazyload src=/kururu-blog/svg/loading.min.svg data-src=git-flow_1.png data-srcset="/kururu-blog/posts/projects/support-private-dev/git-flow_1.png, git-flow_1.png 1.5x, /kururu-blog/posts/projects/support-private-dev/git-flow_1.png 2x" data-sizes=auto alt=/kururu-blog/posts/projects/support-private-dev/git-flow_1.png title=Gitflow-1>
<img class=lazyload src=/kururu-blog/svg/loading.min.svg data-src=git-flow_2.png data-srcset="/kururu-blog/posts/projects/support-private-dev/git-flow_2.png, git-flow_2.png 1.5x, /kururu-blog/posts/projects/support-private-dev/git-flow_2.png 2x" data-sizes=auto alt=/kururu-blog/posts/projects/support-private-dev/git-flow_2.png title=Gitflow-2></div>
</div>
</div></p>
<h3 id=github-actions-ìƒì„±>Github actions ìƒì„±</h3>
<ol>
<li>
<p>ê° feature branch ê°œë°œì™„ë£Œ í›„, develop branchë¡œ pull request <br>
í˜¹ì€ develop, main branchê°€ ë³€ê²½ëœ ê²½ìš°ì—, npmì„ ì´ìš©í•œ build í™•ì¸ì„ ì‹œí–‰</p>
</li>
<li>
<p>ë³¸ projectì—ì„œ unit testëŠ” ë”°ë¡œ ì§„í–‰í•˜ì§€ ì•Šê¸°ë•Œë¬¸ì— buildë§Œ í™•ì¸</p>
</li>
<li>
<p>Project repositoryë‚´ github actions workflow ì‘ì„±</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>aacs-supporter</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c># Controls when the action will run.</span><span class=w>
</span><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span><span class=w></span><span class=c># Triggers the workflow on push or pull request events but only for the main branch</span><span class=w>
</span><span class=w></span><span class=nt>push</span><span class=p>:</span><span class=w>
</span><span class=w>   </span><span class=nt>branches</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=l>develop, main ]</span><span class=w>
</span><span class=w></span><span class=nt>pull_request</span><span class=p>:</span><span class=w>
</span><span class=w>   </span><span class=nt>branches</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=l>develop, main ]</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c># A workflow run is made up of one or more jobs that can run sequentially or in parallel</span><span class=w>
</span><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span><span class=w></span><span class=nt>frontend_build_test</span><span class=p>:</span><span class=w>
</span><span class=w>   </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span><span class=w>   </span><span class=nt>strategy</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>matrix</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>node-version</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=m>12.</span><span class=l>x, 14.x, 15.x ]</span><span class=w>
</span><span class=w>
</span><span class=w>   </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2</span><span class=w>
</span><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Use Node.js ${{ matrix.node-version }}</span><span class=w>
</span><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/setup-node@v2</span><span class=w>
</span><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span><span class=w>         </span><span class=nt>node-version</span><span class=p>:</span><span class=w> </span><span class=l>${{ matrix.node-version }}</span><span class=w>
</span><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>npm ci, build and test</span><span class=w>
</span><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span><span class=sd>         cd frontend
</span><span class=sd>         npm ci
</span><span class=sd>         npm run build --if-present</span><span class=w>         
</span><span class=w></span><span class=nt>backend_build_test</span><span class=p>:</span><span class=w>
</span><span class=w>   </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span><span class=w>   </span><span class=nt>strategy</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>matrix</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>node-version</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=m>12.</span><span class=l>x, 14.x, 15.x ]</span><span class=w>
</span><span class=w>
</span><span class=w>   </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2</span><span class=w>
</span><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Use Node.js ${{ matrix.node-version }}</span><span class=w>
</span><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/setup-node@v2</span><span class=w>
</span><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span><span class=w>         </span><span class=nt>node-version</span><span class=p>:</span><span class=w> </span><span class=l>${{ matrix.node-version }}</span><span class=w>
</span><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>npm ci, build and test</span><span class=w>
</span><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span><span class=sd>         cd backend
</span><span class=sd>         npm ci
</span><span class=sd>         npm run build --if-present</span><span class=w>         
</span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h3 id=live-server-releaseìš©-pipelineìƒì„±>Live server releaseìš© pipelineìƒì„±</h3>
<p>ë³¸ projectëŠ” ì‚¬ë‚´ ì›ê²© serverì— docker container ì‹¤í–‰ <br>
ê·¸ë¦¬ê³  ì‚¬ë‚´ ì›ê²© serverì— ìš´ìš©ì¤‘ì¸ jenkinsê°€ ì¡´ì¬í•¨ìœ¼ë¡œ webhookì„ ì´ìš©í•œ Jenkins pipelineë¥¼ ìƒì„±</p>
<ul>
<li>
<p>Updateëœ ëª¨ë“ˆì˜ ì´í–‰ê¹Œì§€ì˜ flow</p>
<ol>
<li>í•´ë‹¹ repositoryë‚´ main branchê°€ ê°±ì‹ </li>
<li>repositoryë‚´ì— ì„¤ì •í•´ë†“ì€ webhook(release pipeline)ì´ ì‹¤í–‰</li>
<li>ì‚¬ë‚´ Jenkinsë‚´ releaseìš© pipelineì´ ì‹¤í–‰
<ol>
<li>repositoryì˜ main branch checkout</li>
<li>releaseìš© folderì´ë™ í›„, docker-compose fileì„ ì´ìš©í•´ build</li>
<li>buildëœ imageë¥¼ container run ì‹¤í–‰</li>
</ol>
</li>
</ol>
<p>ğŸ”† ë³¸ projectëŠ” ì•„ì§ ê°œë°œë‹¨ê³„ì´ê¸°ë•Œë¬¸ì—, Release pipelineì— ëŒ€í•œ TestëŠ” ì•„ì§ ë¯¸ì‹¤ì‹œ <br>
ğŸ”† í†µí•©í…ŒìŠ¤íŠ¸ê°€ ì™„ë£Œëœí›„ì— pipeline test ì‹¤í–‰ì˜ˆì •</p>
</li>
</ul>
<h2 id=conclusion>CONCLUSION</h2>
<ul>
<li>ê°œë°œ Teamì˜ ì˜ë¢° ë‹¬ì„±, í˜„ì¬ ê°œë°œì§„í–‰ì¤‘</li>
<li>Jenkins Pipeline ìƒì„±ì™„ë£Œ</li>
</ul></div><div class=post-footer id=post-footer>
<div class=post-info><div class=post-info-tag><span><a href=/kururu-blog/tags/devops/>Devops</a>
</span><span><a href=/kururu-blog/tags/projects/>projects</a>
</span></div><div class=post-info-line><div class=post-info-mod>
<span>Updated on 2021-12-05</span>
</div><div class=post-info-mod></div>
</div></div><div class=post-nav><a href=/kururu-blog/posts/devops/ssh-authentication/ class=prev rel=prev title="SSH ë™ì‘ë°©ì‹ê³¼ ì¼ë¶€ ì¸ì¦ë°©ì‹ ì„¤ì •"><i class="fas fa-angle-left fa-fw"></i>Previous Post</a></div></div>
</div></article></div>
</main>
<footer class=footer></footer>
</div>
<div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top">
<i class="fas fa-chevron-up fa-fw"></i>
</a></div><link rel=stylesheet href=/kururu-blog/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/kururu-blog/lib/animate/animate.min.css><script src=/kururu-blog/lib/autocomplete/autocomplete.min.js></script><script src=/kururu-blog/lib/algoliasearch/algoliasearch-lite.umd.min.js></script><script src=/kururu-blog/lib/lazysizes/lazysizes.min.js></script><script src=/kururu-blog/lib/clipboard/clipboard.min.js></script><script>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:10},comment:{},search:{algoliaAppID:"UAL0NNJWXE",algoliaIndex:"index.en",algoliaSearchKey:"7b7fbdfb7ee82ee61901f2c6b09b05be",highlightTag:"em",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"algolia"}}</script><script src=/kururu-blog/js/theme.min.js></script></body></html>