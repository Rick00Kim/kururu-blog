<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>SSH 동작방식과 일부 인증방식 설정 - KURURU Blog</title><meta name="description" content="SSH 기본동작방식, 인증방식의 종류와 그중 Public Key인증방식에 필요한 기본설정방법을 제시"><meta property="og:title" content="SSH 동작방식과 일부 인증방식 설정" />
<meta property="og:description" content="SSH 기본동작방식, 인증방식의 종류와 그중 Public Key인증방식에 필요한 기본설정방법을 제시" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://rick00kim.github.io/kururu-blog/posts/devops/ssh-authentication/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-10-01T10:00:23+09:00" />
<meta property="article:modified_time" content="2021-10-01T10:00:23+09:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="SSH 동작방식과 일부 인증방식 설정"/>
<meta name="twitter:description" content="SSH 기본동작방식, 인증방식의 종류와 그중 Public Key인증방식에 필요한 기본설정방법을 제시"/>
<meta name="application-name" content="KururuTechBlog">
<meta name="apple-mobile-web-app-title" content="KururuTechBlog"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><meta name="google-site-verification" content="twGvePo9HJ-p7TvsvuVzFVC1fnVGRCkQ-MIxc0X4U90" />
<link rel="shortcut icon" type="image/x-icon" href="/kururu-blog/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/kururu-blog/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/kururu-blog/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/kururu-blog/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/kururu-blog/site.webmanifest"><link rel="canonical" href="https://rick00kim.github.io/kururu-blog/posts/devops/ssh-authentication/" /><link rel="prev" href="https://rick00kim.github.io/kururu-blog/posts/projects/register-account-book/" /><link rel="next" href="https://rick00kim.github.io/kururu-blog/posts/projects/support-private-dev/" /><link rel="stylesheet" href="/kururu-blog/css/page.min.css"><link rel="stylesheet" href="/kururu-blog/css/home.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "SSH 동작방식과 일부 인증방식 설정",
        "inLanguage": "ko",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/rick00kim.github.io\/kururu-blog\/posts\/devops\/ssh-authentication\/"
        },"genre": "posts","keywords": "Devops, server, TODO","wordcount":  2167 ,
        "url": "https:\/\/rick00kim.github.io\/kururu-blog\/posts\/devops\/ssh-authentication\/","datePublished": "2021-10-01T10:00:23+09:00","dateModified": "2021-10-01T10:00:23+09:00","publisher": {
            "@type": "Organization",
            "name": "Rick_Kim"},"author": {
                "@type": "Person",
                "name": "Rick_Kim"
            },"description": "SSH 기본동작방식, 인증방식의 종류와 그중 Public Key인증방식에 필요한 기본설정방법을 제시"
    }
    </script></head><body data-header-desktop="" data-header-mobile=""><script>(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('dark' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'dark' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/kururu-blog/" title="KURURU Blog">KURURU Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/kururu-blog/posts/"> Posts </a><a class="menu-item" href="/kururu-blog/tags/"> Tags </a><a class="menu-item" href="/kururu-blog/categories/"> Categories </a><a class="menu-item" href="/kururu-blog/about/"> About </a><span class="menu-item delimiter"></span><span class="menu-item language" title="Select Language">Korean<i class="fas fa-chevron-right fa-fw"></i>
                        <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/kururu-blog/posts/devops/ssh-authentication/" selected>Korean</option></select>
                    </span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="#" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/kururu-blog/" title="KURURU Blog">KURURU Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="#" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="#" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/kururu-blog/posts/" title="">Posts</a><a class="menu-item" href="/kururu-blog/tags/" title="">Tags</a><a class="menu-item" href="/kururu-blog/categories/" title="">Categories</a><a class="menu-item" href="/kururu-blog/about/" title="">About</a><div class="menu-item"><a href="javascript:void(0);" class="theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div><span class="menu-item language" title="Select Language">Korean<i class="fas fa-chevron-right fa-fw"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/kururu-blog/posts/devops/ssh-authentication/" selected>Korean</option></select>
                </span></div>
    </div>
</header><div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content always-active" id="toc-content-auto"></div>
        </div><article class="page single" data-toc="enable"><div class="featured-image"><img
        class="lazyload"
        src="/kururu-blog/svg/loading.min.svg"
        data-src="ssh-authentication.jpg"
        data-srcset="/kururu-blog/posts/devops/ssh-authentication/ssh-authentication.jpg, ssh-authentication.jpg 1.5x, /kururu-blog/posts/devops/ssh-authentication/ssh-authentication.jpg 2x"
        data-sizes="auto"
        alt="/kururu-blog/posts/devops/ssh-authentication/ssh-authentication.jpg"
        title="SSH 기본동작방식, 인증방식의 종류와 그중 Public Key인증방식에 필요한 기본설정방법을 제시" /></div><div class="single-card" data-image="true"><h2 class="single-title animated flipInX">SSH 동작방식과 일부 인증방식 설정</h2><div class="post-meta">
                <div class="post-meta-line"><span class="post-author"><a href="/kururu-blog/about" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Rick_Kim</a></span>&nbsp;<span class="post-category">published in <a href="/kururu-blog/categories/installation/"><i class="far fa-folder fa-fw"></i>installation</a></span></div>
                <div class="post-meta-line"><span><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2021-10-01">2021-10-01</time></span>&nbsp;<span><i class="fas fa-pencil-alt fa-fw"></i>&nbsp;2167 words</span>&nbsp;
                    <span><i class="far fa-clock fa-fw"></i>&nbsp;5 minutes</span>&nbsp;</div>
            </div>
            
            <hr><div class="details toc" id="toc-static"  data-kept="">
                    <div class="details-summary toc-title">
                        <span>Contents</span>
                        <span><i class="details-icon fas fa-angle-right"></i></span>
                    </div>
                    <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#goal">GOAL</a></li>
    <li><a href="#summary">SUMMARY</a>
      <ul>
        <li><a href="#ssh-인증의-기본동작">SSH 인증의 기본동작</a></li>
      </ul>
    </li>
    <li><a href="#precondition">PRECONDITION</a></li>
    <li><a href="#about-public-key-authentication">ABOUT PUBLIC KEY AUTHENTICATION</a>
      <ul>
        <li><a href="#flow">Flow</a></li>
        <li><a href="#how-to-generate-key-pair-and-setting">How to generate key pair and setting?</a></li>
      </ul>
    </li>
    <li><a href="#conclusion">CONCLUSION</a></li>
    <li><a href="#todo">TODO</a></li>
  </ul>
</nav></div>
                </div><div class="content" id="content"><h2 id="goal">GOAL</h2>
<ol>
<li>SSH 기본동작과 각 인증방식 이해</li>
<li>일부 SSH 인증방식에 따른 설정방법을 확인</li>
</ol>
<h2 id="summary">SUMMARY</h2>
<p>SSH(<code>Secure Shell</code>)란, Server에 접속할때 사용하는 Network 프로토콜 중 하나</p>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>Tip<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><ol>
<li>여기서 <code>Server</code>란 Web서버가 아닌 Linux 혹은 Unix 체제의 OS를 뜻함</li>
<li>Telnet또한 Network접속 프로토콜이지만 보통 사설Network에서 사용하며 보안성에 취약한 단점이 있다 <br>
✨ 참조: <a href="https://www.guru99.com/telnet-vs-ssh.html" target="_blank" rel="noopener noreffer">https://www.guru99.com/telnet-vs-ssh.html</a></li>
</ol>
</div>
        </div>
    </div>
<h3 id="ssh-인증의-기본동작">SSH 인증의 기본동작</h3>
<blockquote>
<p>REFERENCES <br>
<a href="https://www.golinuxcloud.com/openssh-authentication-methods-sshd-config/" target="_blank" rel="noopener noreffer">https://www.golinuxcloud.com/openssh-authentication-methods-sshd-config/</a> <br>
<a href="https://info.support.huawei.com/info-finder/encyclopedia/en/SSH.html" target="_blank" rel="noopener noreffer">https://info.support.huawei.com/info-finder/encyclopedia/en/SSH.html</a> <br>
<a href="https://medium.com/@Magical_Mudit/understanding-ssh-workflow-66a0e8d4bf65" target="_blank" rel="noopener noreffer">https://medium.com/@Magical_Mudit/understanding-ssh-workflow-66a0e8d4bf65</a></p>
</blockquote>
<ol>
<li>
<p>Client로부터 Server에 대한 접속 요청</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># SSH command</span>
</span></span><span class="line"><span class="cl"><span class="c1"># SSH 접속 Port는 기본 22이지만, 특정 Port를 지정해 sshd(SSH Daemon)을 실행중인 Server인 경우</span>
</span></span><span class="line"><span class="cl"><span class="c1">#    [-p]옵션을 통해 특정 Port를 지정할수 있다</span>
</span></span><span class="line"><span class="cl">ssh <span class="o">{</span>User name<span class="o">}</span>@<span class="o">{</span>Server Host<span class="o">}</span> <span class="o">[</span>-p <span class="o">{</span>Port<span class="o">}]</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Server 확인 <br>
Server의 공개키를 확인후, 공개키와 Server ID를 <code>~/.ssh/known_hosts</code>에 추가 <br>
혹은 이미 작성된 Server ID가 <code>known_hosts</code>에 있는지 확인</p>
</li>
<li>
<p>Session 키 생성</p>
<p>Server와 Client가 접속할때 사용할 Session 키를 생성</p>
<ul>
<li>생성 Session키는 대칭키</li>
<li>해당 키는 데이터 전송시 암호화 혹은 복호화에 사용됨</li>
<li>Diffie-Hellman Algorithm 방식을 이용</li>
</ul>
</li>
<li>
<p>Client에 대한 인증</p>
<p>SSH 인증방식 종류</p>
<ol>
<li>Password Authentication <br>
SSH 기본 인증방식, SSH 접속 User의 비밀번호를 통해 인증</li>
<li>Public Key Authentication(<code>가장 많이 사용</code>) <br>
Server와 Client간 Key pair(Private, Public)를 통해 보안성을 강화한 인증방식 (비대칭 암호화 알고리즘)</li>
<li>Host based Authentication <br>
동일한 User ID에 대한 접속을 전제로 <strong>신뢰할수</strong> 있는 Client의 Host를 Server에 설정, 제어하는 방식 <br>
Key 등을 설정하지 않아도 인증이 가능하나, [Public key 인증방식]과 같이 사용하는것을 추천(보안성 증가 목적)</li>
<li>Keyboard Authentication <br>
Update 예정</li>
<li>Challenge Responce Authentication <br>
Update 예정</li>
<li>GSSAPI Authentication <br>
Update 예정</li>
</ol>
<blockquote>
<p>Key교환 Flow

<div class="standard">
  <iframe src="https://www.youtube.com/embed/U62S8SchxX4" allow="fullscreen" title="YouTube Video"></iframe>
</div>
</p>
</blockquote>
</li>
<li>
<p>인증성공시, Client쪽에서 Session 요쳥 (SSH 통신 개시)</p>
</li>
</ol>
<h2 id="precondition">PRECONDITION</h2>
<ul>
<li>SSH 인증방식은 위에서 설명했듯이 여러 방법이 있지만, 본 post에서는 그중 가장 많이 사용하는 <code>Public Key 인증방식</code>의 동작과 설정방법에 대해 기술</li>
</ul>
<h2 id="about-public-key-authentication">ABOUT PUBLIC KEY AUTHENTICATION</h2>
<h3 id="flow">Flow</h3>
<ol>
<li>
<p>[동작 환경: <code>Server</code>]</p>
<ul>
<li>(<code>.ssh/authorized_keys</code>내에 키 ID가 존재할 경우) 난수를 생성</li>
<li>Client로부터 접속요청받을때 생성한 Session key를 이용하여 생성한 난수를 암호화한 Message를 Client에게 전송 <br>
✨ Session key의 생성에 대해서: <a href="#ssh-%ec%9d%b8%ec%a6%9d%ec%9d%98-%ea%b8%b0%eb%b3%b8%eb%8f%99%ec%9e%91" rel="">ssh-인증의-기본동작</a> 내 3번</li>
</ul>
</li>
<li>
<p>[동작 환경: <code>Client</code>]</p>
<ul>
<li>Server로부터 전달받은 <code>암호화된 난수 message</code>를 복호화하여 Server에서 생성한 난수정보를 획득</li>
<li>획득한 난수와 Session key를 결합한 값을 MD5 Hash로 생성한 후 Server에게 전송</li>
</ul>
</li>
<li>
<p>[동작 환경: <code>Server</code>]</p>
<ul>
<li>1에서 생성했던 난수와 Session key를 결합한 값을 MD5 Hash로 생성</li>
<li>Client로부터 전달받은 <code>난수와 Session key를 결합한 값을 MD5 Hash값</code>이 서로 일치 하는지 확인</li>
<li>일치할 경우 인증성공</li>
</ul>
</li>
</ol>
<blockquote>
<p>Public key 인증 설명

<div class="standard">
  <iframe src="https://www.youtube.com/embed/dPAw4opzN9g" allow="fullscreen" title="YouTube Video"></iframe>
</div>
</p>
</blockquote>
<h3 id="how-to-generate-key-pair-and-setting">How to generate key pair and setting?</h3>
<p>(본 post는 기본 MacOS에서 진행함. Linux환경에서는 동작가능하지만 Windows에서는 동작하지 않을가능성이 높음)</p>
<ul>
<li>접속대상 Server가 하나이상인 경우를 전제로 작성되어 있음</li>
<li>Private key에 접근시 비밀번호(passphrase)는 설정하지않음 (보안상 설정하는것을 추천)</li>
<li>옵션에 대한 설명은 업데이트 예정</li>
</ul>
<ol>
<li>
<p>[동작 환경: <code>Client</code>]</p>
<ul>
<li>
<p>ssh-keygen을 통한 Key pair 생성</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 접속대상 Server의 Alias를 설정</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">TARGET_SERVER</span><span class="o">=</span><span class="s2">&#34;{Server명}&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ssh-keygen 실행(Server이름별로 구분되도록 파일을 분기)</span>
</span></span><span class="line"><span class="cl">ssh-keygen -t rsa -N <span class="s2">&#34;&#34;</span> -b <span class="m">2048</span> -C <span class="s2">&#34;SSH Authorized key for </span><span class="si">${</span><span class="nv">TARGET_SERVER</span><span class="si">}</span><span class="s2">&#34;</span> -f ~/.ssh/<span class="si">${</span><span class="nv">TARGET_SERVER</span><span class="si">}</span>_ssh_key
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 생성 key pair 확인</span>
</span></span><span class="line"><span class="cl">ls -ltr ~/.ssh/<span class="si">${</span><span class="nv">TARGET_SERVER</span><span class="si">}</span>*
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
<li>
<p>Public key 확인</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 출력된 Public key는 Copy</span>
</span></span><span class="line"><span class="cl">cat ~/.ssh/<span class="si">${</span><span class="nv">TARGET_SERVER</span><span class="si">}</span>_ssh_key.pub
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>[동작 환경: <code>Server</code>]</p>
<ul>
<li>
<p>2번에서 Copy한 Public key를 <code>.ssh/authorized_keys</code>에 추가 <br>
.ssh/authorized_keys가 존재하지 않을 경우에는 생성</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Public key를 추가</span>
</span></span><span class="line"><span class="cl">cat &gt;&gt; ~/.ssh/authorized_keys
</span></span><span class="line"><span class="cl"><span class="c1"># 붙여넣기 후 [ctrl + d]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 추가 확인</span>
</span></span><span class="line"><span class="cl">cat ~/.ssh/authorized_keys
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
<li>
<p>[동작 환경: <code>Client</code>]</p>
<ul>
<li>접속 확인
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ssh -i ~/.ssh/<span class="si">${</span><span class="nv">TARGET_SERVER</span><span class="si">}</span>_ssh_key <span class="o">{</span>User name<span class="o">}</span>@<span class="o">{</span>Server Host<span class="o">}</span> <span class="o">[</span>-p <span class="o">{</span>Port<span class="o">}]</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p>여기까지 설정으로 Public key 인증방식에 대한 설정은 완료</p>
</li>
</ol>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>Tip<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>✨ 추가설정(필수는 아님)</p>
<ul>
<li>
<p>ssh host 설정</p>
<p>ssh 접속시 필요한 옵션등을 포함하는 alias를 <code>~/.ssh</code>내에 설정하여 보다 간단하게 ssh 접속을 가능하게 하기위함</p>
</li>
</ul>
<ol>
<li>
<p>config 수정 (존재하지 않을 경우 신규생성)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># .ssh 내 config 수정</span>
</span></span><span class="line"><span class="cl">chmod <span class="m">666</span> ~/.ssh/config<span class="p">;</span> vi ~/.ssh/config<span class="p">;</span>chmod <span class="m">440</span> ~/.ssh/config
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Host 설정</p>
<p>아래 <code>Template</code>를 이용하여 host설정</p>
<pre tabindex="0"><code>Host Name1
    HostName [IP Address]
    User [Username]
    Port [Port Number]
    IdentityFile ~/.ssh/[private key name]
</code></pre></li>
</ol>
</div>
        </div>
    </div>
<div class="details admonition tip">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>ssh관련 설정파일의 필수 혹은 권장 permission<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><blockquote>
<p>Reference: <a href="https://superuser.com/a/1559867" target="_blank" rel="noopener noreffer">https://superuser.com/a/1559867</a></p>
</blockquote>
<pre tabindex="0"><code>+------------------------+-------------------------------------+-------------+-------------+
| Directory or File      | Man Page                            | Recommended | Mandatory   |
|                        |                                     | Permissions | Permissions |
+------------------------+-------------------------------------+-------------+-------------+
| ~/.ssh/                | There is no general requirement to  | 700         |             |
|                        | keep the entire contents of this    |             |             |
|                        | directory secret, but the           |             |             |
|                        | recommended permissions are         |             |             |
|                        | read/write/execute for the user,    |             |             |
|                        | and not accessible by others.       |             |             |
+------------------------+-------------------------------------+-------------+-------------+
| ~/.ssh/authorized_keys | This file is not highly sensitive,  | 600         |             |
|                        | but the recommended permissions are |             |             |
|                        | read/write for the user, and not    |             |             |
|                        | accessible by others                |             |             |
+------------------------+-------------------------------------+-------------+-------------+
| ~/.ssh/config          | Because of the potential for abuse, |             | 600         |
|                        | this file must have strict          |             |             |
|                        | permissions: read/write for the     |             |             |
|                        | user, and not accessible by others. |             |             |
|                        | It may be group-writable provided   |             |             |
|                        | that the group in question contains |             |             |
|                        | only the user.                      |             |             |
+------------------------+-------------------------------------+-------------+-------------+
| ~/.ssh/identity        | These files contain sensitive data  |             | 600         |
| ~/.ssh/id_dsa          | and should be readable by the user  |             |             |
| ~/.ssh/id_rsa          | but not accessible by others        |             |             |
|                        | (read/write/execute)                |             |             |
+------------------------+-------------------------------------+-------------+-------------+
| ~/.ssh/identity.pub    | Contains the public key for         | 644         |             |
| ~/.ssh/id_dsa.pub      | authentication.  These files are    |             |             |
| ~/.ssh/id_rsa.pub      | not sensitive and can (but need     |             |             |
|                        | not) be readable by anyone.         |             |             |
+------------------------+-------------------------------------+-------------+-------------+
</code></pre></div>
        </div>
    </div>
<h2 id="conclusion">CONCLUSION</h2>
<ol>
<li>SSH의 기본 동작 Flow를 이해</li>
<li>여러 인증방식중 흔히 사용하는 Public key 인증방식의 Flow이해와 설정방법을 통해 <br>
CI/CD에서 특정 Server의 동작 실행 혹은 Monitoring도 보다 간결하게 진행가능</li>
</ol>
<h2 id="todo">TODO</h2>
<ol>
<li>SSH 통신이 필요한 다양한 상황에서 보다 적절한 선택을 가능하게 하기위해 다른 인증방식에 대한 내용과 설정방법을 파악할 필요가 있음</li>
<li>SSH command내 주로 사용하는 Options를 정리</li>
<li>Public key 인증방식의 이해를 보다 쉽게 하는 목적으로 Flow chart 작성도 고려 (Not Mandatory)</li>
</ol></div><div class="post-footer" id="post-footer">
    <div class="post-info"><div class="post-info-tag"><span><a href="/kururu-blog/tags/devops/">Devops</a>
                </span><span><a href="/kururu-blog/tags/server/">server</a>
                </span><span><a href="/kururu-blog/tags/todo/">TODO</a>
                </span></div><div class="post-info-line"><div class="post-info-mod">
                <span>Updated on 2021-10-01</span>
            </div><div class="post-info-mod"></div>
        </div></div><div class="post-nav"><a href="/kururu-blog/posts/projects/register-account-book/" class="prev" rel="prev" title="Slack App과 사내출퇴근서비스를 연동"><i class="fas fa-angle-left fa-fw"></i>Previous Post</a>
            <a href="/kururu-blog/posts/projects/support-private-dev/" class="next" rel="next" title="사내 Private project(운영지원)">Next Post<i class="fas fa-angle-right fa-fw"></i></a></div></div>
</div><div id="comments" class="single-card"><div id="vssue"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://github.com/meteorlxy/vssue">Vssue</a>.
            </noscript></div></article></div>
            </main>
            <footer class="footer"><div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.107.0">Hugo</a> | Theme - <a href="https://github.com/khusika/FeelIt" target="_blank" rel="noopener noreffer" title="FeelIt 1.0.1"><i class="fas fa-hand-holding-heart fa-fw"></i> FeelIt</a>
        </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/kururu-blog/about">Rick_Kim</a></span></div>
</div>
</footer>
        </div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-chevron-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment-alt fa-fw"></i>
            </a></div><link rel="stylesheet" href="/kururu-blog/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/kururu-blog/lib/animate/animate.min.css"><link rel="stylesheet" href="/kururu-blog/lib/vue/vssue/vssue.min.css"><script src="/kururu-blog/lib/vue/vue.runtime.min.js"></script><script src="/kururu-blog/lib/vue/vssue/vssue.github.min.js"></script><script src="/kururu-blog/lib/autocomplete/autocomplete.min.js"></script><script src="/kururu-blog/lib/algoliasearch/algoliasearch-lite.umd.min.js"></script><script src="/kururu-blog/lib/lazysizes/lazysizes.min.js"></script><script src="/kururu-blog/lib/clipboard/clipboard.min.js"></script><script>window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{"vssue":{"clientID":"a7d393679b82f55d962f","clientSecret":"4a2c8fb05cca875f7e449a002a66b7929b535b24","owner":"Rick00Kim","repo":"kururu-blog","title":"SSH 동작방식과 일부 인증방식 설정"}},"search":{"algoliaAppID":"UAL0NNJWXE","algoliaIndex":"index.en","algoliaSearchKey":"7b7fbdfb7ee82ee61901f2c6b09b05be","highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"algolia"}};</script><script src="/kururu-blog/js/theme.min.js"></script></body></html>
